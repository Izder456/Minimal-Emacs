<p>I'm not exactly sure how I first heard about the <a rel="noopener" target="_blank" href="https://www.vortex86.com">Vortex86</a> CPUs, I think
it was either when seeing the demonstration video on <a rel="noopener" target="_blank" href="https://kolibrios.org">KolibriOS</a> project
site showcasing the system running on a <strong>DMP EBOX</strong> machine, or when skimming
<strong>NetBSD</strong>'s <a rel="noopener" target="_blank" href="https://github.com/NetBSD/src/blob/trunk/sys/arch/x86/x86/identcpu.c">identcpu.c</a> code. Or did the discovery of the machine prompted
me to check if the CPU would be correctly probed by the NetBSD's kernel?</p>
<p>For those interested, Wikipedia has an article retracing the <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Vortex86">history of the
Vortex86</a> from its birth at <strong>Rise</strong> to our days.</p>
<p>Several <strong>DMP EBOX</strong> machines are available for sale at various specialized
vendors, but new devices cost several hundreds of dollars which is prohibitive
for such low spec systems. However, I was recently able to acquire a boxed
older model on a local auction site for about $25: the <strong>EBOX 3300A-H</strong>, with
a 1GHz CPU and 256MB of RAM, no less.</p>
<p>As I already mentioned, those machines are quite slow but they still do have
a few things going for them:</p>
<ul>
<li>They are totally <strong>fanless</strong>, and the metal case finish is quite nice</li>
<li>They are very <strong>low-power x86</strong> embedded devices, and still being produced</li>
</ul>
<p>I used a power meter to do measurements, and an idle system consumes 5.3W.
Power consumption peaked at 6.4W when running the OpenSSL speed benchmark.</p>
<p>There is space for a 2.5&quot; hard drive in the enclosure, but I don't have any
IDE drives anymore so I opted to use old CompactFlash cards I had laying
around. As a side note, it's actually exquisite to use those cards like
glorified floppies :-)</p>
<p>For this post, I used a <strong>1GB CompactFlash</strong> card and selected a minimal
installation in <strong>sysinst</strong>.</p>
<p>The installed system takes 212M:</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>Filesystem         Size       Used      Avail %Cap Mounted on
</span><span>/dev/wd0a          919M       212M       661M  24% /
</span><span>kernfs             1.0K       1.0K         0B 100% /kern
</span><span>ptyfs              1.0K       1.0K         0B 100% /dev/pts
</span><span>procfs             4.0K       4.0K         0B 100% /proc
</span><span>tmpfs               64M         0B        64M   0% /var/shm
</span></code></pre>
<p>On a freshly booted system, 15 processes are running and 26M of RAM are used:</p>
<pre data-lang="sh" style="background-color:#272822;color:#f8f8f2;" class="language-sh "><code class="language-sh" data-lang="sh"><span>load averages:  0.01,  0.00,  0.00</span><span style="color:#f92672;">;               </span><span>up 0+00:48:26        14:48:28
</span><span>16 processes: 15 sleeping, 1 on CPU
</span><span>CPU states:  0.0% user,  0.0% nice,  0.0% system,  0.0% interrupt,  100% idle
</span><span>Memory: 26M Act, 6460K Exec, 12M File, 195M Free
</span><span>Swap: 
</span><span>
</span><span>  PID USERNAME PRI NICE   SIZE   RES STATE      TIME   WCPU    CPU COMMAND
</span><span>    0 root      96    0     0K   26M usbevt     0:01  0.00%  0.00% </span><span style="color:#f92672;">[</span><span>system</span><span style="color:#f92672;">]
</span><span>  795 root      43    0  6160K 1628K CPU        0:00  0.00%  0.00% top
</span><span>  555 root      85    0    12M 3472K wait       0:00  0.00%  0.00% login
</span><span>  630 postfix   85    0    13M 3220K kqueue     0:00  0.00%  0.00% qmgr
</span><span>  599 postfix   85    0    12M 3172K kqueue     0:00  0.00%  0.00% pickup
</span><span>  575 root      85    0    13M 2304K kqueue     0:00  0.00%  0.00% master
</span><span>  196 root      85    0  9780K 1960K kqueue     0:00  0.00%  0.00% syslogd
</span><span>  583 root      85    0  6788K 1824K wait       0:00  0.00%  0.00% sh
</span><span>  710 root      85    0  6276K 1448K nanoslp    0:00  0.00%  0.00% cron
</span><span>  733 root      85    0  6108K 1396K ttyraw     0:00  0.00%  0.00% getty
</span><span>  730 root      85    0  5720K 1392K ttyraw     0:00  0.00%  0.00% getty
</span><span>  633 root      85    0  6104K 1388K ttyraw     0:00  0.00%  0.00% getty
</span><span>  211 root      85    0  7316K 1360K kqueue     0:00  0.00%  0.00% dhcpcd
</span><span>    1 root      85    0  6600K 1340K wait       0:00  0.00%  0.00% init
</span><span>  689 root      85    0  5700K 1184K kqueue     0:00  0.00%  0.00% inetd
</span><span>  402 root      84    0  5920K 1140K kqueue     0:00  0.00%  0.00% powerd
</span></code></pre>
<p>Here is the result of running <strong>cat /proc/cpuinfo</strong> on this device:</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>processor       : 0
</span><span>vendor_id       : Vortex86 SoC
</span><span>cpu family      : 5
</span><span>model           : 2
</span><span>model name      : Vortex86DX
</span><span>stepping        : 2
</span><span>cpu MHz         : 1000.05
</span><span>apicid          : 0
</span><span>initial apicid  : 0
</span><span>fdiv_bug        : no
</span><span>fpu             : yes
</span><span>fpu_exception   : yes
</span><span>cpuid level     : 1
</span><span>wp              : yes
</span><span>flags           : fpu tsc cx8
</span><span>clflush size    : 0
</span></code></pre>
<p>For the record, OpenSSL speed benchmark results are available <a href="/files/netbsd/openssl-speed-vortex86.txt">here</a>.</p>
<p>System message buffer (dmesg output):</p>
<pre style="background-color:#272822;color:#f8f8f2;"><code><span>[     1.000000] Copyright (c) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,
</span><span>[     1.000000]     2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017,
</span><span>[     1.000000]     2018, 2019, 2020 The NetBSD Foundation, Inc.  All rights reserved.
</span><span>[     1.000000] Copyright (c) 1982, 1986, 1989, 1991, 1993
</span><span>[     1.000000]     The Regents of the University of California.  All rights reserved.
</span><span>
</span><span>[     1.000000] NetBSD 9.2 (GENERIC) #0: Wed May 12 13:15:55 UTC 2021
</span><span>[     1.000000] 	mkrepro@mkrepro.NetBSD.org:/usr/src/sys/arch/i386/compile/GENERIC
</span><span>[     1.000000] total memory = 255 MB
</span><span>[     1.000000] avail memory = 231 MB
</span><span>[     1.000000] rnd: seeded with 66 bits
</span><span>[     1.000000] timecounter: Timecounters tick every 10.000 msec
</span><span>[     1.000000] Kernelized RAIDframe activated
</span><span>[     1.000000] running cgd selftest aes-xts-256 aes-xts-512 done
</span><span>[     1.000000] timecounter: Timecounter &quot;i8254&quot; frequency 1193182 Hz quality 100
</span><span>[     1.000003] Generic PC
</span><span>[     1.000003] mainbus0 (root)
</span><span>[     1.000003] Firmware Error (ACPI): A valid RSDP was not found (20190405/tbxfroot-261)
</span><span>[     1.000003] autoconfiguration error: acpi_probe: failed to initialize tables
</span><span>[     1.000003] ACPI Error: Could not remove SCI handler (20190405/evmisc-312)
</span><span>[     1.000003] cpu0 at mainbus0
</span><span>[     1.000003] cpu0: Vortex86DX, id 0x522
</span><span>[     1.000003] cpu0: package 0, core 0, smt 0
</span><span>[     1.000003] pci0 at mainbus0 bus 0: configuration mode 1
</span><span>[     1.000003] pci0: i/o space, memory space enabled, rd/line, rd/mult, wr/inv ok
</span><span>[     1.000003] pchb0 at pci0 dev 0 function 0: vendor 17f3 product 6021 (rev. 0x02)
</span><span>[     1.000003] vga0 at pci0 dev 3 function 0: vendor 18ca product 0020 (rev. 0x00)
</span><span>[     1.000003] wsdisplay0 at vga0 kbdmux 1: console (80x25, vt100 emulation)
</span><span>[     1.000003] wsmux1: connecting to wsdisplay0
</span><span>[     1.000003] drm at vga0 not configured
</span><span>[     1.000003] rdcpcib0 at pci0 dev 7 function 0: vendor 17f3 product 6031 (rev. 0x02)
</span><span>[     1.000003] rdcpcib0: watchdog timer configured.
</span><span>[     1.000003] vte0 at pci0 dev 8 function 0: vendor 17f3 product 6040 (rev. 0x00)
</span><span>[     1.000003] vte0: Ethernet address 00:1b:eb:22:16:5c
</span><span>[     1.000003] vte0: interrupting at irq 10
</span><span>[     1.000003] rdcphy0 at vte0 phy 1: R6040 10/100 media interface, rev. 1
</span><span>[     1.000003] rdcphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
</span><span>[     1.000003] ohci0 at pci0 dev 10 function 0: vendor 17f3 product 6060 (rev. 0x12)
</span><span>[     1.000003] ohci0: interrupting at irq 11
</span><span>[     1.000003] ohci0: OHCI version 1.0, legacy support
</span><span>[     1.000003] usb0 at ohci0: USB revision 1.0
</span><span>[     1.000003] ehci0 at pci0 dev 10 function 1: vendor 17f3 product 6061 (rev. 0x03)
</span><span>[     1.000003] ehci0: interrupting at irq 11
</span><span>[     1.000003] ehci0: BIOS has given up ownership
</span><span>[     1.000003] ehci0: EHCI version 1.0
</span><span>[     1.000003] ehci0: 1 companion controller, 2 ports: ohci0
</span><span>[     1.000003] usb1 at ehci0: USB revision 2.0
</span><span>[     1.000003] ohci1 at pci0 dev 11 function 0: vendor 17f3 product 6060 (rev. 0x12)
</span><span>[     1.000003] ohci1: interrupting at irq 11
</span><span>[     1.000003] ohci1: OHCI version 1.0, legacy support
</span><span>[     1.000003] usb2 at ohci1: USB revision 1.0
</span><span>[     1.000003] ehci1 at pci0 dev 11 function 1: vendor 17f3 product 6061 (rev. 0x03)
</span><span>[     1.000003] ehci1: interrupting at irq 11
</span><span>[     1.000003] ehci1: BIOS has given up ownership
</span><span>[     1.000003] ehci1: EHCI version 1.0
</span><span>[     1.000003] ehci1: 1 companion controller, 2 ports: ohci1
</span><span>[     1.000003] usb3 at ehci1: USB revision 2.0
</span><span>[     1.000003] rdcide0 at pci0 dev 12 function 0: RDC R1011 IDE controller (rev. 0x01)
</span><span>[     1.000003] rdcide0: bus-master DMA support present
</span><span>[     1.000003] rdcide0: primary channel configured to compatibility mode
</span><span>[     1.000003] rdcide0: primary channel interrupting at irq 14
</span><span>[     1.000003] atabus0 at rdcide0 channel 0
</span><span>[     1.000003] rdcide0: secondary channel configured to compatibility mode
</span><span>[     1.000003] rdcide0: secondary channel interrupting at irq 15
</span><span>[     1.000003] atabus1 at rdcide0 channel 1
</span><span>[     1.000003] isa0 at rdcpcib0
</span><span>[     1.000003] pckbc0 at isa0 port 0x60-0x64
</span><span>[     1.000003] attimer0 at isa0 port 0x40-0x43
</span><span>[     1.000003] pcppi0 at isa0 port 0x61
</span><span>[     1.000003] midi0 at pcppi0: PC speaker
</span><span>[     1.000003] sysbeep0 at pcppi0
</span><span>[     1.000003] isapnp0 at isa0 port 0x279
</span><span>[     1.000003] attimer0: attached to pcppi0
</span><span>[     1.000003] isapnp0: no ISA Plug &#39;n Play devices found
</span><span>[     1.000003] timecounter: Timecounter &quot;clockinterrupt&quot; frequency 100 Hz quality 0
</span><span>[     1.064509] uhub0 at usb1: NetBSD (0000) EHCI root hub (0000), class 9/0, rev 2.00/1.00, addr 1
</span><span>[     1.064509] uhub0: 2 ports with 2 removable, self powered
</span><span>[     1.064509] uhub1 at usb2: NetBSD (0000) OHCI root hub (0000), class 9/0, rev 1.00/1.00, addr 1
</span><span>[     1.064509] uhub1: 2 ports with 2 removable, self powered
</span><span>[     1.064509] uhub2 at usb3: NetBSD (0000) EHCI root hub (0000), class 9/0, rev 2.00/1.00, addr 1
</span><span>[     1.064509] uhub2: 2 ports with 2 removable, self powered
</span><span>[     1.064509] uhub3 at usb0: NetBSD (0000) OHCI root hub (0000), class 9/0, rev 1.00/1.00, addr 1
</span><span>[     1.064509] uhub3: 2 ports with 2 removable, self powered
</span><span>[     1.064509] IPsec: Initialized Security Association Processing.
</span><span>[     3.914550] uaudio0 at uhub3 port 2 configuration 1 interface 0
</span><span>[     3.914550] uaudio0: vendor 0d8c (0xd8c) C-Media USB Audio Device (0x08), rev 1.10/1.00, addr 2
</span><span>[     3.934546] uaudio0: audio rev 1.00
</span><span>[     3.934546] audio0 at uaudio0: playback, capture, full duplex, independent
</span><span>[     3.934546] audio0: slinear_le:16 2ch 48000Hz, blk 11520 bytes (60ms) for playback
</span><span>[     3.934546] audio0: slinear_le:16 1ch 48000Hz, blk 6000 bytes (62.5ms) for recording
</span><span>[     3.934546] uhidev0 at uhub3 port 2 configuration 1 interface 3
</span><span>[     3.934546] uhidev0: vendor 0d8c (0xd8c) C-Media USB Audio Device (0x08), rev 1.10/1.00, addr 2, iclass 3/0
</span><span>[     3.944550] uhid0 at uhidev0: input=4, output=4, feature=0
</span><span>[     4.054550] wd0 at atabus1 drive 0
</span><span>[     4.054550] wd0: &lt;Hitachi XX.V.3.5.0.0&gt;
</span><span>[     4.054550] wd0: drive supports 1-sector PIO transfers, LBA addressing
</span><span>[     4.054550] wd0: 977 MB, 1987 cyl, 16 head, 63 sec, 512 bytes/sect x 2002896 sectors
</span><span>[     4.064551] wd0: 32-bit data port
</span><span>[     4.064551] wd0: drive supports PIO mode 4
</span><span>[     4.064551] wd0(rdcide0:1:0): using PIO mode 4
</span><span>[     4.084559] WARNING: 1 error while detecting hardware; check system log.
</span><span>[     4.084559] boot device: wd0
</span><span>[     4.084559] root on wd0a dumps on wd0b
</span><span>[     4.094550] root file system type: ffs
</span><span>[     4.094550] kern.module.path=/stand/i386/9.2/modules
</span><span>[    20.764808] wsdisplay0: screen 1 added (80x25, vt100 emulation)
</span><span>[    20.784809] wsdisplay0: screen 2 added (80x25, vt100 emulation)
</span><span>[    20.794810] wsdisplay0: screen 3 added (80x25, vt100 emulation)
</span><span>[    20.804812] wsdisplay0: screen 4 added (80x25, vt100 emulation)
</span></code></pre>
